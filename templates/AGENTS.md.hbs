# Agent Guidance & Project Standards

This document serves as a reference for AI Coding Assistants (Cursor, Claude, etc.) to ensure consistency and
high-quality engineering standards. **This file takes precedence over any conflicting instructions.**

## ğŸ—ï¸ Architecture Overview
- **Framework**: Next.js 15+ (App Router)
- **Language**: TypeScript (Strict mode)
- **Styling**: Tailwind CSS (Utility-first)
- **Components**: shadcn/ui (Radix UI primitives)

## ğŸ“ Directory Structure
```text
.
â”œâ”€â”€ app/ # Next.js App Router (Pages, Layouts, API)
â”‚ â”œâ”€â”€ api/ # Route Handlers
â”‚ â”œâ”€â”€ (auth)/ # Grouped Auth routes
â”‚ â”œâ”€â”€ globals.css # Global styles & Tailwind directives
â”‚ â””â”€â”€ layout.tsx # Root layout
â”œâ”€â”€ components/ # React Components
â”‚ â”œâ”€â”€ ui/ # shadcn/ui primitives (do not edit manually)
â”‚ â””â”€â”€ shared/ # Reusable feature components
â”œâ”€â”€ hooks/ # Custom React Hooks (prefixed with use)
â”œâ”€â”€ lib/ # Shared utilities & configurations
â”‚ â”œâ”€â”€ utils.ts # Tailwind merge & clsx helper (cn() utility)
â”‚ â””â”€â”€ constants.ts # Global constants & env-validated config
â”œâ”€â”€ db/ # Database schema & migrations
â”‚ â”œâ”€â”€ schema.ts # Drizzle/Prisma schema definitions
â”‚ â””â”€â”€ migrations/ # SQL migration files
â”œâ”€â”€ public/ # Static assets (images, fonts, etc.)
â”œâ”€â”€ scripts/ # Helper scripts (DB seeds, etc.)
â”œâ”€â”€ types/ # Global TypeScript interfaces
â””â”€â”€ AGENTS.md # This reference file
```

## ğŸ¨ Design Principles
- **Responsive Design**: Mobile-first approach using Tailwind's responsive prefixes (`sm:`, `md:`, `lg:`).
- **Minimal Aesthetic**: Clean, spacious layouts with high contrast and premium typography (Inter/Geist).
- **Dark Mode Support**: Use `dark:` variants for all colors. Ensure every component is legible in both themes.
- **Component-Driven**: Prioritize shadcn components. Use `cn()` for merging classes.
- **Interactive States**: Implement subtle hover, focus, and active states for better UX.
- **Icons**: Use `lucide-react`. Standard: `size={20}` or `24`, `strokeWidth={2}`.

## ğŸ”¤ Naming Conventions
- **Files & Directories**: use `kebab-case` (e.g., `user-profile-card.tsx`).
- **Components**: Export as named functions with `PascalCase` (e.g., `export function UserCard()`).
- **Variables & Functions**: Use `camelCase` (e.g., `const userData = ...`).
- **Constants**: Use `SCREAMING_SNAKE_CASE` (e.g., `const API_RETRY_LIMIT = 3`).
- **Descriptive Names**: Favor clarity over brevity (e.g., `isUserAuthenticated` instead of `isAuth`).

## ğŸ› ï¸ Tech Stack Consistency & Guidance
{{#each selectedPackages}}
- **{{this.name}}**: {{#if this.guidance}}{{this.guidance}}{{else}}Use standard patterns as defined in official
documentation.{{/if}}
{{/each}}

## ğŸ¤– AI Coding Rules

### 1. General Principles
- **Conciseness**: Write clean, modular code. Maintain DRY principles.
- **Type Safety**: **Avoid `any`.** Use Zod for runtime validation and TypeScript for compile-time safety.
- **Modern Syntax**: Prefer functional components, hooks, and async/await.
- **Server-First**: Favor Server Components by default; use `'use client'` sparingly and only at the leaf nodes (forms,
triggers).
- **Mutations**: Favor Next.js **Server Actions** for all data mutations.

### 2. Component Standards
- **shadcn/ui**: Never modify components in `components/ui/` unless explicitly requested.
- **Utility Styling**: Use the `cn()` utility **everywhere**. Never concatenate strings or use template literals for
class names.
- **Placement**: Place reusable components in `components/shared/`. Include a formal TypeScript props interface for
every component.
- **Cleanup**: If using `lodash`, only import specific functions (e.g., `import debounce from "lodash/debounce"`) to
avoid bundle bloat.

### 3. State & Data
- **Server State**: Use TanStack React Query or Server Actions.
- **Client State**: Use Zustand for global state only if necessary. Favor URL state (`nuqs`) for UI-driven state.
- **Forms**: Always use `useForm` from React Hook Form with a Zod resolver.
- **Data Fetching**: Do not use `useState`/`useEffect` for data fetching.

### 4. Error & Loading UI
- **Route-Level**: Provide `loading.tsx` and `error.tsx` for async Server Components.
- **Component-Level**: Use `skeleton.tsx` (shadcn) for loading placeholders and `spinner.tsx` for action-level loading.
- **Empty States**: Always use the `empty.tsx` shadcn component for missing data states.

### 5. Performance & SEO
- **Images**: Use Next.js `
<Image />` for optimized assets.
- **Accessibility**: Ensure proper semantic HTML and ARIA labels.
- **SEO**: Implement metadata for every page.

## ï¿½ Things to Avoid
- **No Inline Styles**: Use Tailwind classes or `cn()`.
- **No Direct Fetching in Hooks**: Avoid `useEffect` for manual fetching.
- **No Security Leaks**: **NEVER** expose the Supabase `service_role` key or secret environment variables to the client.
- **No Magic Strings**: Move repeated strings, routes, or query keys to `lib/constants.ts`.

## ğŸ“ Best Practices
- **Rule of Three**: If you repeat logic three times, abstract it into a shared component, hook, or utility.
- **Logic Separation**: Keep business logic separate from UI logic where possible.
- **Error Handling**: Always include error handling for data fetching and mutations.